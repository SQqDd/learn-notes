- V8 如何回收老生代对象
  - 老生代对象说明
    - 老生代对象存放在右侧老生代区域
    - 64位操作系统 1.4G，32位操作系统 700M
    - 老生代对象指的是存活时间较长的对象（全局对象等）
  - 老生代对象回收实现
    - 主要采用标记清除、标记整理、增量标记算法
    - 首先使用标记清除算法完成垃圾空间的回收
    - 采用标记整理进行空间优化
      - 当新生代对象晋升至老生代对象，如果发现老生代对象空间不足，就会采用标记整理算法对空间进行优化
    - 采用增量标记进行效率优化
  - 细节对比
    - 新生代区域垃圾回收使用空间换时间
      - 将空间一分为二，利用复制和空间互换的方法提升效率
    - 老生代区域垃圾回收不适合复制算法
      - 因为老生代区域空间较大，空间一分为二之后也会高达 700M
      - 复制大量数据消耗的时间也不少，不划算，所以不适合复制算法


![](https://dd-ss.oss-cn-guangzhou.aliyuncs.com/20210123095223.png)

- 增量标记如何进行效率优化
  - 如上图所示，垃圾回收的过程中，不可避免地导致业务代码执行的阻塞。
  - 如果老生代的垃圾回收任务很重，那么耗时是非常可怕的，严重影响应用的性能
  - 为了避免这个问题，V8 增量标记
  - 增量标记是把一个回收任务，拆分成多个小的任务，与程序交替执行。直至标记阶段完成过后，才进行空间回收
  - 采用增量标记，大大地提升效率，减少程序的阻塞，提升用户体验
