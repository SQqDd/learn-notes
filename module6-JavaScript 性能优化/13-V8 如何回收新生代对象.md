![](https://dd-ss.oss-cn-guangzhou.aliyuncs.com/20210122200439.png)

- V8 如何回收新生代对象
  - V8 内存分配
    - V8 内存空间一分为二
    - 小空间用于存储新生代对象（32MB｜16MB）
    - 新生代对象指的是存活时间较短的对象（局部变量这种）
  - 新生代对象回收实现
    - 回收过程采用复制算法 + 标记整理
    - 新生代内存划分出两个大小一致的空间
    - 使用空间为 From，空闲空间为 To
    - 一开始将活动对象存储于 From 空间
    - 回收前先标记整理 From 空间的活动对象并拷贝至 To 空间
    - 接着直接释放掉 From 空间，To 空间和 From 空间互相交换
    - From -> To, To -> From
  - 回收细节说明
    - 拷贝过程中（将活动对象拷贝至 To）可能会出现晋升
    - 晋升就是将新生代对象移动至老生代对象
    - 什么情况下才会晋升？
      - 一轮 GC 还存活的新生代对象需要晋升
      - To 空间的使用率超过 25%（如果没有这个限制， To 空间变为 From 空间之后，存储新数据的时候，有可能不够空间）
